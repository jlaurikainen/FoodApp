(function(t){function e(e){for(var a,i,o=e[0],l=e[1],u=e[2],f=0,p=[];f<o.length;f++)i=o[f],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&p.push(s[i][0]),s[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);c&&c(e);while(p.length)p.shift()();return n.push.apply(n,u||[]),r()}function r(){for(var t,e=0;e<n.length;e++){for(var r=n[e],a=!0,o=1;o<r.length;o++){var l=r[o];0!==s[l]&&(a=!1)}a&&(n.splice(e--,1),t=i(i.s=r[0]))}return t}var a={},s={app:0},n=[];function i(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=a,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(r,a,function(e){return t[e]}.bind(null,a));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var c=l;n.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";var a=r("64a9"),s=r.n(a);s.a},3525:function(t,e,r){},"358f":function(t,e,r){},"42f0":function(t,e,r){},"4e98":function(t,e,r){"use strict";var a=r("3525"),s=r.n(a);s.a},"546f":function(t,e,r){"use strict";var a=r("6436"),s=r.n(a);s.a},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("f751"),r("097d");var a=r("2b0e"),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("transition",{attrs:{name:"fade",mode:"out-in"}},[r("router-view")],1)],1)},n=[],i={name:"App",mounted:function(){document.addEventListener("backbutton",this.backButtonNavigation,!1),this.$store.dispatch("checkUser",{router:this.$router}),this.$store.dispatch("updateMealList",{router:this.$router})},methods:{backButtonNavigation:function(t){t.preventDefault(),"/"!=this.$router.currentRoute.fullPath?this.$router.push("/").catch((function(t){console.log(t)})):navigator.app.exitApp()}}},o=i,l=(r("034f"),r("2877")),u=Object(l["a"])(o,s,n,!1,null,null,null),c=u.exports,f=r("8c4f"),p=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("div",{staticClass:"column"},[r("router-view")],1),r("MealListComponent",{attrs:{meals:t.meals}}),r("NavigationComponent")],1)},m=[],h=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),v=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("div",{staticClass:"column u-mb-2-5"},[r("table",{staticClass:"u-full-width u-mb-2-5"},[r("tbody",t._l(t.meals,(function(e){return r("tr",{key:e.id},[r("td",[t._v(t._s(e.name))]),r("td",[t._v(t._s(e.calories)+" kcal")])])})),0)]),r("router-link",{staticClass:"u-pull-right button-primary",attrs:{to:"/addmeal",tag:"button"}},[r("i",{staticClass:"material-icons u-mr-1"},[t._v("add")]),t._v("Lisää ateria\n    ")])],1)])},d=[],g={props:["meals"]},b=g,w=(r("a62d"),Object(l["a"])(b,v,d,!1,null,"c7943e8a",null)),y=w.exports,C=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"navigation-wrapper",class:[t.menuOpen?t.openClass:""]},[r("div",{staticClass:"button-wrapper",on:{click:t.toggleMenu}},[r("i",{staticClass:"material-icons"},[t._v(t._s(t.menuOpen?"close":"menu"))])]),r("ul",{staticClass:"nav-list"},[r("router-link",{staticClass:"nav-list-item",attrs:{to:"/userinfo",tag:"li"}},[r("i",{staticClass:"material-icons u-mr-1"},[t._v("person")]),t._v("Tietosi\n    ")])],1)])},O=[],_={data:function(){return{menuOpen:!1,openClass:"menu-open"}},methods:{toggleMenu:function(){this.menuOpen=!this.menuOpen}},watch:{$route:function(){this.menuOpen=!1}}},I=_,x=(r("4e98"),Object(l["a"])(I,C,O,!1,null,"68ad2fcf",null)),k=x.exports,j=r("2f62");function P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function E(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?P(r,!0).forEach((function(e){Object(h["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var D={components:{MealListComponent:y,NavigationComponent:k},computed:E({},Object(j["c"])({meals:function(t){return t.meals}}))},N=D,$=(r("8491"),Object(l["a"])(N,p,m,!1,null,"6da8f51e",null)),F=$.exports,L=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("h1",[t._v("Lisää ateria")]),r("form",[t.errors.length?r("div",{staticClass:"row"},[r("div",{staticClass:"column"},[r("ul",t._l(t.errors,(function(e){return r("li",{key:e},[t._v(t._s(e))])})),0)])]):t._e(),r("div",{staticClass:"row"},[r("div",{staticClass:"column"},[r("label",{attrs:{for:"mealName"}},[t._v("Aterian nimi")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.mealInfo.mealName,expression:"mealInfo.mealName"}],staticClass:"u-full-width",attrs:{type:"text",name:"mealName"},domProps:{value:t.mealInfo.mealName},on:{input:function(e){e.target.composing||t.$set(t.mealInfo,"mealName",e.target.value)}}})])]),r("div",{staticClass:"row"},[r("div",{staticClass:"column"},[r("label",{attrs:{for:"mealCalories"}},[t._v("Kalorit")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.mealInfo.mealCalories,expression:"mealInfo.mealCalories"}],staticClass:"u-full-width",attrs:{type:"number",name:"mealCalories"},domProps:{value:t.mealInfo.mealCalories},on:{input:function(e){e.target.composing||t.$set(t.mealInfo,"mealCalories",e.target.value)}}})])]),r("div",{staticClass:"row"},[r("div",{staticClass:"column"},[r("router-link",{staticClass:"u-pull-left warning",attrs:{to:"/",tag:"button"}},[r("i",{staticClass:"material-icons u-mr-1"},[t._v("close")]),t._v("Peruuta\n        ")]),r("button",{staticClass:"u-pull-right button-primary",attrs:{type:"submit"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.submit()}}},[r("i",{staticClass:"material-icons u-mr-1"},[t._v("add")]),t._v("Lisää\n        ")])],1)])])])},S=[],T=r("74ce"),A={components:{},data:function(){return{errors:[],mealInfo:{mealName:null,mealCalories:null,mealCarbs:null,mealProtein:null,mealFats:null}}},methods:{submit:function(){this.errors=[];var t=new Date((new Date).setHours(0,0,0,0));if(this.mealInfo.mealName&&this.mealInfo.mealCalories){var e=new T["a"]("mealdb");e.version(1).stores({mealsByDate:"++id, date"}),e.mealsByDate.add({date:t,name:this.mealInfo.mealName,calories:this.mealInfo.mealCalories}),this.$store.dispatch("updateMealList"),this.$router.push("/").catch((function(t){console.log(t)}))}else this.errors.push("Lisää vähintään aterian nimi ja kalorit.")}}},M=A,R=(r("f769"),Object(l["a"])(M,L,S,!1,null,"241c585f",null)),B=R.exports,U=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("div",{staticClass:"column"},[r("form",[r("div",{staticClass:"row"},[t.errors.length?r("div",{staticClass:"column"},[r("ul",t._l(t.errors,(function(e){return r("li",{key:e},[t._v(t._s(e))])})),0)]):t._e()]),r("div",{staticClass:"row"},[r("div",{staticClass:"column"},[r("label",{attrs:{for:"height"}},[t._v("Pituus")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.height,expression:"userInfo.height"}],staticClass:"u-full-width",attrs:{type:"number",name:"height"},domProps:{value:t.userInfo.height},on:{input:function(e){e.target.composing||t.$set(t.userInfo,"height",e.target.value)}}})])]),r("div",{staticClass:"row"},[r("div",{staticClass:"column"},[r("label",{attrs:{for:"weight"}},[t._v("Paino")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.weight,expression:"userInfo.weight"}],staticClass:"u-full-width",attrs:{type:"number",name:"weight"},domProps:{value:t.userInfo.weight},on:{input:function(e){e.target.composing||t.$set(t.userInfo,"weight",e.target.value)}}})])]),r("div",{staticClass:"row"},[r("div",{staticClass:"column"},[r("label",{attrs:{for:"age"}},[t._v("Ikä")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.age,expression:"userInfo.age"}],staticClass:"u-full-width",attrs:{type:"number",name:"age"},domProps:{value:t.userInfo.age},on:{input:function(e){e.target.composing||t.$set(t.userInfo,"age",e.target.value)}}})])]),r("div",{staticClass:"row"},[r("div",{staticClass:"column"},[r("label",{attrs:{for:"activity"}},[t._v("Aktiivisuustaso")]),r("select",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.activity,expression:"userInfo.activity"}],staticClass:"u-full-width",attrs:{id:"activity"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.userInfo,"activity",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"1"}},[t._v("BMR")]),r("option",{attrs:{value:"1.2"}},[t._v("Vähäinen")]),r("option",{attrs:{value:"1.35"}},[t._v("Kevyt")]),r("option",{attrs:{value:"1.5"}},[t._v("Kohtalainen")]),r("option",{attrs:{value:"1.65"}},[t._v("Aktiivinen")]),r("option",{attrs:{value:"1.8"}},[t._v("Erittäin aktiivinen")]),r("option",{attrs:{value:"1.95"}},[t._v("Extra-aktiivinen")])]),r("p",[t._v(t._s(t.activityText))])])]),r("div",{staticClass:"row"},[r("div",{staticClass:"column one-half"},[r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.sex,expression:"userInfo.sex"}],attrs:{type:"radio",name:"sex",value:"male"},domProps:{checked:t._q(t.userInfo.sex,"male")},on:{change:function(e){return t.$set(t.userInfo,"sex","male")}}}),r("span",{staticClass:"label-body"},[t._v("Mies")])])]),r("div",{staticClass:"column one-half"},[r("label",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.sex,expression:"userInfo.sex"}],attrs:{type:"radio",name:"sex",value:"female"},domProps:{checked:t._q(t.userInfo.sex,"female")},on:{change:function(e){return t.$set(t.userInfo,"sex","female")}}}),r("span",{staticClass:"label-body"},[t._v("Nainen")])])])]),r("div",{staticClass:"row"},[r("div",{staticClass:"column"},[r("h4",{staticClass:"u-text-center"},[t._v("Kalorikulutusarvio")]),r("h2",{staticClass:"u-text-center"},[t._v(t._s(t.calories))])])]),r("div",{staticClass:"row"},[r("div",{staticClass:"column"},[t.userExists?r("router-link",{staticClass:"u-pull-left warning",attrs:{to:"/",tag:"button"}},[r("i",{staticClass:"material-icons u-mr-1"},[t._v("close")]),t._v("Peruuta\n          ")]):t._e(),r("button",{staticClass:"u-pull-right button-primary",attrs:{type:"submit"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.submit()}}},[r("i",{staticClass:"material-icons u-mr-1"},[t._v("add")]),t._v("\n              "+t._s(t.userExists?"Päivitä":"Tallenna")+"\n          ")])],1)])])])])},V=[],W=(r("96cf"),r("3b8d")),K={mounted:function(){var t=Object(W["a"])(regeneratorRuntime.mark((function t(){var e,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=new T["a"]("userdb"),e.version(1).stores({user:"++id"}),t.next=4,e.user.get(1,(function(t){null!=t&&(r.userExists=!0,r.userInfo=t)}));case 4:e.close();case 5:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),data:function(){return{errors:[],userInfo:{age:0,height:0,weight:0,sex:"male",activity:1},activityText:"Valitse aktiivisuustasosi",userExists:!1}},methods:{submit:function(){if(this.hasNull(this.userInfo))this.errors.push("Täytä kaikki kentät");else{var t=new T["a"]("userdb");t.version(1).stores({user:"++id"}),this.userExists?this.updateUser(t):this.newUser(t),this.$store.dispatch("checkUser",{router:this.$router})}},newUser:function(t){t.user.add({age:this.userInfo.age,height:this.userInfo.height,weight:this.userInfo.weight,sex:this.userInfo.sex,activity:this.userInfo.activity})},updateUser:function(t){t.user.update(1,{age:this.userInfo.age,height:this.userInfo.height,weight:this.userInfo.weight,sex:this.userInfo.sex,activity:this.userInfo.activity})},hasNull:function(t){for(var e in t)if(null==t[e])return!0;return!1}},computed:{calories:function(){return"male"==this.userInfo.sex?parseInt((10*parseFloat(this.userInfo.weight)+6.25*parseFloat(this.userInfo.height)-5*parseFloat(this.userInfo.age)+5)*parseFloat(this.userInfo.activity)):parseInt((10*parseFloat(this.userInfo.weight)+6.25*parseFloat(this.userInfo.height)-5*parseFloat(this.userInfo.age)-161)*parseFloat(this.userInfo.activity))}}},q=K,z=(r("57e8"),Object(l["a"])(q,U,V,!1,null,"8d746536",null)),Y=z.exports,G=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("div",{staticClass:"graph-container"},[r("svg",{staticClass:"u-full-width circle-graph",attrs:{width:"360",height:"240",viewBox:"0 0 360 240"}},[r("circle",{style:{r:t.circleRadius,strokeWidth:t.strokeWidth},attrs:{cx:"50%",cy:"50%",fill:"transparent",stroke:"#ddf"}}),r("circle",{style:{r:t.circleRadius,strokeWidth:t.strokeWidth,strokeDasharray:t.strokeDashArray,strokeDashoffset:t.strokeDashOffset,transformOrigin:"50% 50%",transform:"rotate(-90deg)"},attrs:{cx:"50%",cy:"50%",fill:"transparent",stroke:"#334"}}),r("text",{attrs:{x:"50%",y:"45%","font-size":"3.5rem","dominant-baseline":"middle","text-anchor":"middle"}},[t._v("\n        "+t._s(t.caloriePercent)+"%\n        "),r("tspan",{attrs:{x:"50%",y:"57.5%","font-size":"0.6em"}},[t._v("\n          "+t._s(t.getTotalCalories)+"\n        ")]),r("tspan",{attrs:{x:"50%",y:"65%","font-size":"0.6em"}},[t._v("\n          "+t._s(t.getCalorieLimit)+"\n        ")])])])])])},H=[];function J(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function Q(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?J(r,!0).forEach((function(e){Object(h["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):J(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var X={mounted:function(){this.computeGraphCompletion()},data:function(){return{circleRadius:100,strokeWidth:30,strokeDashOffset:628}},computed:Q({},Object(j["b"])(["getCalorieLimit","getTotalCalories"]),{},Object(j["c"])({meals:function(t){return t.meals}}),{caloriePercent:function(){return parseInt(this.getTotalCalories/this.getCalorieLimit*100)},strokeDashArray:function(){return parseInt(2*this.circleRadius*Math.PI)}}),methods:{computeGraphCompletion:function(){var t=this;setTimeout((function(){t.strokeDashOffset=parseInt(t.strokeDashArray-t.caloriePercent/100*t.strokeDashArray)}),100)}}},Z=X,tt=(r("546f"),Object(l["a"])(Z,G,H,!1,null,"4089061d",null)),et=tt.exports,rt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("div",{staticClass:"graph-container"},[r("svg",{staticClass:"u-full-width",attrs:{width:"360",height:"240",viewBox:t.svgViewBox}},[r("rect",{staticClass:"svg-background",attrs:{height:"100%",width:"100%",fill:"rgba(0,0,0,0.25)"}}),r("line",{attrs:{x1:"0",x2:"3600",y1:t.baselineY,y2:t.baselineY,stroke:"red","stroke-width":"20"}})])])])},at=[];function st(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function nt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?st(r,!0).forEach((function(e){Object(h["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):st(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var it={data:function(){return{baselineCalories:1800}},computed:nt({},Object(j["b"])(["getCalorieLimit"]),{svgViewBox:function(){return"0 0 3600 "+parseInt(1.5*parseInt(this.getCalorieLimit))},baselineY:function(){return parseInt(1.5*parseInt(this.getCalorieLimit))-this.baselineCalories}})},ot=it,lt=Object(l["a"])(ot,rt,at,!1,null,null,null),ut=lt.exports;a["a"].use(f["a"]);var ct=new f["a"]({mode:Object({NODE_ENV:"production",BASE_URL:""}).CORDOVA_PLATFORM?"hash":"history",base:"",routes:[{path:"/",component:F,children:[{path:"",name:"daily",component:et},{path:"monthly",name:"monthly",component:ut}]},{path:"/addmeal",name:"addmeal",component:B},{path:"/userinfo",name:"userinfo",component:Y}],linkExactActiveClass:"menu-active"});r("7d05");a["a"].use(j["a"]);var ft=new j["a"].Store({state:{userInfo:{},meals:[],userdb:null,mealdb:null},actions:{updateMealList:function(){var t=Object(W["a"])(regeneratorRuntime.mark((function t(e){var r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=new Date((new Date).setHours(0,0,0,0)),a=new T["a"]("mealdb"),a.version(1).stores({mealsByDate:"++id, date"}),t.next=5,a.mealsByDate.where("date").equals(r).toArray();case 5:s=t.sent,e.commit("SET_MEALS",s),a.close();case 8:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),checkUser:function(){var t=Object(W["a"])(regeneratorRuntime.mark((function t(e,r){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=r.router,s=new T["a"]("userdb"),s.version(1).stores({user:"++id"}),t.next=5,s.user.get(1,(function(t){null==t?a.push("/userinfo").catch((function(t){})):(e.commit("SET_USER_INFO",t),a.push("/").catch((function(t){})))}));case 5:s.close();case 6:case"end":return t.stop()}}),t)})));function e(e,r){return t.apply(this,arguments)}return e}()},mutations:{SET_USER_INFO:function(t,e){t.userInfo=e},SET_MEALS:function(t,e){t.meals=[],e.forEach((function(e){t.meals.push(e)}))}},getters:{getCalorieLimit:function(t){return"male"==t.userInfo.sex?parseInt((10*parseFloat(t.userInfo.weight)+6.25*parseFloat(t.userInfo.height)-5*parseFloat(t.userInfo.age)+5)*parseFloat(t.userInfo.activity)):parseInt((10*parseFloat(t.userInfo.weight)+6.25*parseFloat(t.userInfo.height)-5*parseFloat(t.userInfo.age)-161)*parseFloat(t.userInfo.activity))},getTotalCalories:function(t){var e=0;return t.meals.length>0&&t.meals.forEach((function(t){e+=parseFloat(t.calories)})),e}}});a["a"].config.productionTip=!1,new a["a"]({router:ct,store:ft,render:function(t){return t(c)}}).$mount("#app")},"57e8":function(t,e,r){"use strict";var a=r("42f0"),s=r.n(a);s.a},6436:function(t,e,r){},"64a9":function(t,e,r){},"7d05":function(t,e,r){},8491:function(t,e,r){"use strict";var a=r("d042"),s=r.n(a);s.a},a62d:function(t,e,r){"use strict";var a=r("358f"),s=r.n(a);s.a},ca39:function(t,e,r){},d042:function(t,e,r){},f769:function(t,e,r){"use strict";var a=r("ca39"),s=r.n(a);s.a}});
//# sourceMappingURL=app.dd8e376a.js.map